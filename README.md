Chatbot to fight against binge eating disorders
=============

The purpose of this chatbot is to help people deal with binge eating disorders. 
The chatbot can do the following:

- Interrogate the user
- Analyze each episode
- Propose apporpriate prevention strategies in form of "emergency cards"
- Send funny pictures
- Send reminders
- Send useful statistics

Conceptual Model
---------

![architecture-du-systeme](https://user-images.githubusercontent.com/41119320/55954460-6b1d9b00-5c67-11e9-8f49-1d84c88ef3d1.png)

Screenshots
---------

Here's a preview of a typical converstion with the Telegram bot:

| | | |
|:-------------------------:|:-------------------------:|:-------------------------:|
|<img src="https://user-images.githubusercontent.com/41119320/55954480-7a044d80-5c67-11e9-990a-e94b6c0749d3.png" width="350" height="600" />|<img src="https://user-images.githubusercontent.com/41119320/55954481-7a044d80-5c67-11e9-8c29-12de96652a69.png" width="350" height="600" />|<img src="https://user-images.githubusercontent.com/41119320/55954482-7a044d80-5c67-11e9-87db-4c8528088df6.png" width="350" height="600" />|
|<img src="https://user-images.githubusercontent.com/41119320/55954484-7a9ce400-5c67-11e9-9b6d-acc6393ff677.png" width="350" height="600" />|<img src="https://user-images.githubusercontent.com/41119320/55954487-7b357a80-5c67-11e9-81ea-dea4eec99525.png" width="350" height="600" />|<img src="https://user-images.githubusercontent.com/41119320/55954488-7b357a80-5c67-11e9-9b10-4a67325b299b.png" width="350" height="600" />|
|<img src="https://user-images.githubusercontent.com/41119320/55954489-7b357a80-5c67-11e9-9911-b5be1d56dba7.png" width="350" height="600" />|<img src="https://user-images.githubusercontent.com/41119320/55954490-7c66a780-5c67-11e9-8ed2-3a440819040a.png" width="350" height="600" />||


Prerequisites
---------

- **Python 3.6.5 (64-Bit)** (https://www.python.org/downloads/release/python-365/)
- **Visual C ++ Build Tools** (https://visualstudio.microsoft.com/visual-cpp-build-tools/)
- **Rasa Core 0.10.2** (http://rasa.com/docs/core/installation/)
- **Rasa NLU 0.12.13** (http://rasa.com/docs/nlu/installation/)
- **Ngrok** (https://ngrok.com/download)
- **Telegram** (https://telegram.org/)

Installation
------------

**1. Install Python 3.6.5**

**2. Install Visual C ++ Build Tools**

**3. Install Rasa Core through the command line**

      pip install rasa_core == 0.10.2

**4. Install Rasa NLU**

      pip install rasa_nlu == 0.12.3

**5. Add the spacy pipeline to the Rasa NLU**

      pip install rasa_nlu [spacy]

**5. Add the language model to spacy**

      python -m spacy download en_core_web_md
      python -m spacy link en_core_web_md

**6. Install Ngrok and specify your Authentication Token on https://dashboard.ngrok.com/auth**

      ngrok authtoken <my_token>

**7. Install plotly**

      pip install plotly


Configuration
------------

**1. First, create the database by launching (in the 'db' directory)**

      python db_init.py

**2. Modify the file `chart.py` by specifying your Username and API key of Plot.ly**


Training the bot
---------

**To generate the model after any modification of training data or domain**

      python nlu_model.py

**To train the model automatically**

      python train_init.py

**To train the model online (manual training)**

      python train_online.py


Test the bot
---------

**To test the bot on the command line**

      python run_bot.py

Accessing the bot via Telegram
------------

**1. Using Ngrok, open an HTTP connection on a given port**

      ngrok http <port>
    
**2. Modify the file `run_telegram.py` by specifying your Telegram bot's access token in the `access_token` field and the bot's username in the `verify` field**    

**3. Launch the Python script by specifying the URL generated by Ngrok (as string) and the port number**

      python run_telegram.py <URL> <port>

**4. Access your bot on Telegram**




